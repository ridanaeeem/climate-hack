<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" type="text/css" href="src/css/main.css" />
		<link rel="icon" type="image/x-icon" href="src/images/icon.png" />
		<title>Sign Up | ClimateActs</title>
	</head>
	<body>
		<div id="navbar">
			<header>
				<h1><a href="index.html">ClimateActs</a></h1>
			</header>
		</div>
		<form action="index.html" style="border: 1px solid #ccc">
			<div class="container">
				<h1>Sign Up</h1>
				<p>Please fill in this form to create an account.</p>

				<div id="email">
					<label for="email"><b>Email</b></label>
					<input type="text" placeholder="Enter Email" name="email" required />
				</div>
				<div id="password">
					<label for="password"><b>Password</b></label>
					<input type="password" placeholder="Enter Password" name="password" required />
				</div>

				<label>
					<input type="checkbox" checked="checked" name="remember" style="margin-bottom: 15px" /> Remember me
				</label>

				<div class="clearfix">
					<a href="index.html"><button type="button" class="cancelbtn">Cancel</button></a>
					<button type="submit" class="signupbtn" onclick="signUp()">Sign Up</button>
				</div>
			</div>
		</form>
	</body>
	<footer id="sign-footer">All Rights Reserved &#169;</footer>
	<!-- <script src="src/javascript/main.js"> -->
	<script>
		function getEmailPwd() {
			let email = document.getElementsByName("email")[0].value;
			let password = document.getElementsByName("password")[0].value;
			return [email, password];
		}

		function getName() {
			return document.getElementsByName("name")[0].value;
		}

		function createNewUser(email, password) {
			let newUser = {};
			newUser.email = email;
			newUser.password = password;
			// newUser.name = getName();
			newUser.points = 0;
			return newUser;
		}

		function signUp() {
			let [email, password] = getEmailPwd();
			// let USERS = getUSERS();
			let USERS = new Map();
			if (USERS.has(email)) {
				alert("This email is already associated with an account.");
				return;
			}
			alert("going to write");
			// localStorage.setItem("USERS", USERS);
			localStorage.setItem('currentUser', email);
			localStorage.setItem('currentPassword', password);
			// localStorage.setItem("currentName", getName());
			localStorage.setItem("currentPoints", 0);
			alert("Account created successfully.");
			return;
		}

		function login() {
			let [email, password] = getEmailPwd();
			let USERS = getUSERS();
			if (!USERS.has(email)) {
				alert("This email is not associated with an account.");
				return;
			}
			if (!(USERS.get(email).password === password)) {
				alert("Incorrect password.");
				return;
			}
			localStorage.setItem("currentUser", email);
			localStorage.setItem("currentPassword", password);
			// localStorage.setItem("currentName", USERS.get(email).name);
			// localStorage.setItem("currentPoints", USERS.get(email).points);
			localStorage.setItem("currentName", "User");
			localStorage.setItem("currentPoints", 0);
			return;
		}
	</script>
</html>
